name: CI
on:
push:
branches: [ main, master ]
pull_request:
branches: [ main, master ]


jobs:
test:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- name: Use Node.js
uses: actions/setup-node@v4
with:
node-version: '20'
- name: Install deps
run: npm ci
- name: Start Vite
run: npm run dev &
- name: Wait for vite
run: npx wait-on http://localhost:5173
- name: Run unit tests
run: npm test -- --reporter=dot
- name: Run E2E (Cypress)
run: |
npx cypress run --headless
env:
CI: true